"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["3689"],{3236:function(e,t,n){n.r(t),n.d(t,{default:()=>b});var a=n(4132),s=n(9546);let i=e=>{let t,n=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,i={setState:a,getState:s,getInitialState:()=>c,subscribe:e=>(n.add(e),()=>n.delete(e))},c=t=e(a,s,i);return i},c=e=>e?i(e):i,l=e=>e,o=e=>{let t=c(e),n=e=>(function(e,t=l){let n=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},r=e=>e?o(e):o,u=r(e=>({data:"",loading:!1,actionA:async()=>{e({loading:!0}),await new Promise(e=>setTimeout(e,1e3)),e({loading:!1,data:"等待请求中"})},actionB:async()=>{e({loading:!0}),await u.getState().actionA(),setTimeout(()=>{e({loading:!1,data:"已完成"})},3e3)}})),d=r(e=>({count:0,increase:()=>e(e=>({count:e.count+1})),decrease:()=>e(e=>({count:e.count-1}))})),b=()=>{let{count:e,increase:t,decrease:n}=d(),{data:s,loading:i,actionB:c}=u();return(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{children:["Count: ",e]}),(0,a.jsxs)("h1",{children:["Message: ",s]}),(0,a.jsx)("button",{onClick:t,className:"border px-2 text-sm",children:"点击修改 +"}),(0,a.jsx)("button",{onClick:n,className:"border px-2 text-sm",children:"点击修改 -"}),(0,a.jsx)("button",{onClick:c,disabled:i,className:"border px-2 text-sm",children:i?"Loading...":"请求一个异步操作"})]})}}}]);